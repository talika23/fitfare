{% comment %} 
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Fitness Chatbot</title>
<link rel="stylesheet" href="{% static 'core/css/bootstrap.min.css' %}">
<style>
body { font-family: 'Poppins', sans-serif; background: #f0f2f5; display:flex; justify-content:center; align-items:center; height:100vh; margin:0; }
.chat-card { background:#fff; padding:1rem; border-radius:15px; box-shadow:0 10px 25px rgba(0,0,0,0.2); width:500px; max-height:90vh; display:flex; flex-direction:column; }
#chat-log { flex:1; overflow-y:auto; padding:10px; display:flex; flex-direction:column; border-top:1px solid #eee; margin-bottom:10px; }
.message { padding:10px 15px; border-radius:15px; margin:5px 0; max-width:75%; word-wrap: break-word; }
.user { background:#6a11cb; color:#fff; align-self:flex-end; border-bottom-right-radius:0; }
.bot { background:#2575fc; color:#fff; align-self:flex-start; border-bottom-left-radius:0; }
input { width:75%; padding:10px; border-radius:10px; border:1px solid #ccc; margin-bottom:5px; }
button { paadding:10px 20px; border-radius:10px; background:#6a11cb; color:#fff; border:none; cursor:pointer; margin:0 5px; transition:0.3s; }
button:hover { transform:scale(1.05); background:#2575fc; }
.clear-btn { background:#ff4b2b; width:100%; margin-top:5px; }
.typing { font-size:0.85em; color:#555; margin:3px 0; }
</style>
</head>
<body>

<div class="chat-card">
    <h2>AI Fitness Chatbot</h2>
    <div id="chat-log"></div>
    <input type="text" id="user-msg" placeholder="Ask a question...">
    <div>
        <button onclick="sendMessage()">Send</button>
        <button class="clear-btn" onclick="clearChat()">Clear Chat</button>
    </div>
</div>

<script>
// Chatbot answers
const faqAnswers = {
    "what is bmi": "BMI (Body Mass Index) is a measure of body fat based on height and weight.",
    "how to lose weight": "For weight loss, do cardio exercises regularly, maintain a calorie deficit, and eat protein-rich foods.",
    "best exercises for abs": "Try planks, crunches, bicycle crunches, and leg raises for abs.",
    "how to gain muscle": "Focus on strength training with compound exercises and eat enough protein.",
    "what is a good diet plan": "Include vegetables, fruits, lean proteins, whole grains, and healthy fats.",
    "motivate me": "Consistency is key! Keep pushing, results will come. üí™",
    "suggest a workout": "Try: 20 min HIIT + 10 min core + 20 min strength training.",
    "how much water should i drink": "You should drink about 2-3 liters of water daily."
};

// Load chat history
function loadChat(){
    const history = JSON.parse(localStorage.getItem('chatHistory')) || [];
    history.forEach(msg => addMessage(msg.text, msg.sender, false));
}

// Save message
function saveMessage(text, sender){
    const history = JSON.parse(localStorage.getItem('chatHistory')) || [];
    history.push({text, sender});
    localStorage.setItem('chatHistory', JSON.stringify(history));
}

// Add message to chat
function addMessage(text, sender, save=true){
    const log = document.getElementById('chat-log');
    const p = document.createElement('div');
    p.className = `message ${sender}`;
    const time = new Date().toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
    p.innerHTML = `<strong>${sender==='user'?'You':'Bot'} (${time}):</strong> ${text}`;
    log.appendChild(p);
    log.scrollTop = log.scrollHeight;
    if(save) saveMessage(text, sender);
}

// Typing indicator
function botTyping(callback){
    const log = document.getElementById('chat-log');
    const typingDiv = document.createElement('div');
    typingDiv.className = 'typing bot';
    typingDiv.innerText = 'Bot is typing...';
    log.appendChild(typingDiv);
    log.scrollTop = log.scrollHeight;
    setTimeout(() => { log.removeChild(typingDiv); callback(); }, 1000);
}

// Simple logic
function sendMessage(){
    const input = document.getElementById('user-msg');
    const msg = input.value.trim().toLowerCase();
    if(!msg) return;
    addMessage(msg, 'user');

    // Decide answer
    let answer = "Sorry, I don't know the answer. Please ask a different fitness question.";
    for(const q in faqAnswers){
        if(msg.includes(q)){ answer = faqAnswers[q]; break; }
    }

    // Random workout suggestion
    if(msg.includes("workout") || msg.includes("suggest a workout")){
        const workouts = ["20 min HIIT + 10 min core + 20 min strength", "15 min cardio + 15 min abs + 10 min stretch", "30 min full body strength + 10 min cool down"];
        answer = workouts[Math.floor(Math.random()*workouts.length)];
    }

    // Motivation quotes
    if(msg.includes("motivate") || msg.includes("motivation")){
        const quotes = ["Push yourself because no one else will!", "Don't stop until you're proud!", "Consistency is key! Keep going!", "Sweat is just fat crying. üí™"];
        answer = quotes[Math.floor(Math.random()*quotes.length)];
    }

    // BMI calculation
    const bmiMatch = msg.match(/bmi.*(\d{1,3})\s*cm.*(\d{1,3})\s*kg/);
    if(bmiMatch){
        const h = parseInt(bmiMatch[1])/100;
        const w = parseInt(bmiMatch[2]);
        const bmi = (w/(h*h)).toFixed(2);
        answer = `Your BMI is ${bmi}`;
    }

    botTyping(() => addMessage(answer, 'bot'));
    input.value = '';
}

// Clear chat
function clearChat(){
    document.getElementById('chat-log').innerHTML='';
    localStorage.removeItem('chatHistory');
}

// Press Enter
document.getElementById("user-msg").addEventListener("keypress", function(event){
    if(event.key === "Enter"){ event.preventDefault(); sendMessage(); }
});

// Load history on page load
window.onload = loadChat;
</script>

</body>
</html>  

  {% endcomment %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Fitness Chatbot üí™</title>
<link rel="stylesheet" href="{% static 'core/css/bootstrap.min.css' %}">
<style>
body {
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(135deg, #6a11cb, #2575fc);
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 0;
  overflow: hidden;
}

/* Updated Chat Container Design */
.chat-container {
  width: 420px;
  height: 600px;
  background: rgba(0, 0, 0, 0.6);
  border: 2px solid rgba(255, 255, 255, 0.2);
  border-radius: 25px;
  box-shadow: 0 0 25px rgba(0, 255, 255, 0.2),
              0 0 50px rgba(106, 17, 203, 0.4);
  backdrop-filter: blur(12px);
  display: flex;
  flex-direction: column;
  padding: 1rem;
  animation: fadeInUp 1s ease;
  color: white;
  position: relative;
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}

h2 {
  text-align: center;
  color: #00e6e6;
  font-weight: 700;
  margin-bottom: 10px;
  text-shadow: 0 0 10px rgba(0,255,255,0.6);
}

#chat-log {
  flex: 1;
  overflow-y: auto;
  padding: 10px;
  border-radius: 10px;
  background: rgba(255,255,255,0.1);
  scroll-behavior: smooth;
  color: #f2f2f2;
}

.message {
  padding: 10px 15px;
  border-radius: 18px;
  margin: 8px 0;
  max-width: 80%;
  font-size: 0.95rem;
  line-height: 1.4;
  display: inline-block;
  animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}

/* Chat Bubble Colors */
.user {
  background: linear-gradient(135deg, #6a11cb, #2575fc);
  color: #fff;
  align-self: flex-end;
  border-bottom-right-radius: 0;
  box-shadow: 0 0 10px rgba(37,117,252,0.4);
}

.bot {
  background: linear-gradient(135deg, #00c6ff, #0072ff);
  color: #fff;
  align-self: flex-start;
  border-bottom-left-radius: 0;
  box-shadow: 0 0 10px rgba(0,114,255,0.4);
}

.input-area {
  display: flex;
  margin-top: 10px;
}

input {
  flex: 1;
  padding: 12px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.3);
  background: rgba(255,255,255,0.15);
  color: white;
  outline: none;
  font-size: 0.9rem;
}

input::placeholder {
  color: rgba(255,255,255,0.6);
}

button {
  padding: 12px 18px;
  margin-left: 5px;
  border-radius: 10px;
  border: none;
  background: linear-gradient(135deg, #00e6e6, #6a11cb);
  color: white;
  font-weight: 600;
  cursor: pointer;
  transition: 0.3s;
}

button:hover {
  transform: scale(1.05);
  background: linear-gradient(135deg, #6a11cb, #00e6e6);
}

.clear-btn {
  width: 100%;
  margin-top: 5px;
  background: linear-gradient(135deg, #ff416c, #ff4b2b);
  box-shadow: 0 0 10px rgba(255,75,43,0.4);
}

.typing {
  color: #ccc;
  font-size: 0.85em;
  font-style: italic;
  margin-top: 5px;
}

::-webkit-scrollbar {
  width: 6px;
}
::-webkit-scrollbar-thumb {
  background: #00e6e6;
  border-radius: 5px;
}
</style>
</head>

<body>
<div class="chat-container">
  <h2>üèãÔ∏è‚Äç‚ôÇÔ∏è AI Fitness Chatbot</h2>
  <div id="chat-log"></div>

  <div class="input-area">
    <input type="text" id="user-msg" placeholder="Ask about fitness, diet, or motivation...">
    <button onclick="sendMessage()">Send</button>
  </div>
  <button class="clear-btn" onclick="clearChat()">üßπ Clear Chat</button>
</div>

<script>
/* Chat logic ‚Äî unchanged */
const faqAnswers = {
  "what is bmi": "BMI (Body Mass Index) = weight(kg) / [height(m)]¬≤. It helps determine healthy weight range.",
  "how to lose weight": "Create a calorie deficit! Eat clean, reduce sugar, and do daily workouts üèÉ‚Äç‚ôÇÔ∏è.",
  "how to gain weight": "Eat calorie-dense foods, strength train, and get proper sleep üçóüí™.",
  "best exercises for abs": "Planks, crunches, bicycle crunches, and mountain climbers üî•.",
  "what is a good diet plan": "Balance meals with proteins, veggies, carbs, and healthy fats.",
  "how much water should i drink": "2‚Äì3 liters daily is ideal üíß.",
  "how to increase stamina": "Cardio, breathing control, and gradual endurance training help.",
  "how to improve flexibility": "Stretch daily and try yoga üßò‚Äç‚ôÄÔ∏è.",
  "what should i eat after workout": "Protein-rich foods like eggs, paneer, chicken, or whey shakes.",
  "how to reduce belly fat": "Do HIIT workouts and avoid sugary drinks completely!",
  "what time is best to workout": "Morning workouts improve consistency; evening improves strength üí™.",
  "how many hours should i sleep": "Aim for 7‚Äì9 hours of quality sleep üò¥.",
  "how to stay consistent": "Set small goals, track progress, and reward yourself!",
  "motivate me": "Push yourself because no one else will. You got this! üí•",
  "give me motivation": "Don‚Äôt stop until you‚Äôre proud. Every rep counts üí™üî•.",
  "suggest a workout": "Try: 20min HIIT + 15min core + 15min strength üèãÔ∏è‚Äç‚ôÄÔ∏è.",
  "should i take protein powder": "Yes, if you can‚Äôt meet daily protein needs through food.",
  "is cardio good": "Yes, cardio keeps your heart and lungs healthy ‚ù§Ô∏è.",
  "how to build muscles": "Lift heavy, eat more protein, and rest properly üí™.",
  "how to track progress": "Use photos, measurements, and fitness journals üìà.",
  "can i workout daily": "Yes, but vary intensity. Include rest days for recovery üí§.",
  "best exercises for arms": "Bicep curls, tricep dips, pushups üí™.",
  "best exercises for legs": "Squats, lunges, and deadlifts ü¶µ.",
  "best time to drink water": "After waking up, before meals, and during workouts üíß.",
  "should i stretch before workout": "Always warm up to prevent injuries ‚ö†Ô∏è.",
  "how to increase height": "Height mainly depends on genetics, but good nutrition and posture help.",
  "what foods give energy": "Bananas, oats, eggs, nuts, and yogurt ‚ö°.",
  "should i run daily": "Running daily is fine if you rest properly and stay hydrated.",
  "can i eat rice during diet": "Yes, eat in moderation. Brown rice is better üçö.",
  "how to boost metabolism": "Eat protein, drink green tea, and move frequently üî•.",
  "how to get glowing skin": "Hydration, exercise, and vitamins help skin glow üåü.",
  "how to improve immunity": "Eat citrus fruits, garlic, stay active üí™.",
  "how to start gym": "Start slow, focus on form, and don‚Äôt compare yourself.",
  "how to avoid injuries": "Warm up, use correct posture, and stretch afterward.",
  "how to recover faster": "Proper sleep, protein intake, hydration, and light stretching üõå.",
  "best pre-workout snacks": "Banana, peanut butter toast, or oats 30-60 min before training.",
  "how to lose fat without losing muscle": "Combine resistance training with moderate cardio and protein diet.",
  "how to reduce sugar cravings": "Eat more fiber, protein, and healthy fats to stabilize blood sugar.",
  "how to improve posture": "Strengthen back and core muscles, avoid slouching, take breaks.",
  "how often should i weigh myself": "Once a week is enough to track trends, not daily fluctuations.",
  "how to improve endurance": "Gradually increase cardio duration, do interval training."
  // ...rest same as before
};

function loadChat(){
  const history = JSON.parse(localStorage.getItem('chatHistory')) || [];
  history.forEach(msg => addMessage(msg.text, msg.sender, false));
}

function saveMessage(text, sender){
  const history = JSON.parse(localStorage.getItem('chatHistory')) || [];
  history.push({text, sender});
  localStorage.setItem('chatHistory', JSON.stringify(history));
}

function addMessage(text, sender, save=true){
  const log = document.getElementById('chat-log');
  const div = document.createElement('div');
  div.className = `message ${sender}`;
  const time = new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
  div.innerHTML = `<strong>${sender === 'user' ? 'You' : 'Bot'} (${time}):</strong><br>${text}`;
  log.appendChild(div);
  log.scrollTop = log.scrollHeight;
  if(save) saveMessage(text, sender);
}

function botTyping(callback){
  const log = document.getElementById('chat-log');
  const typingDiv = document.createElement('div');
  typingDiv.className = 'typing';
  typingDiv.innerText = 'ü§ñ Bot is typing...';
  log.appendChild(typingDiv);
  log.scrollTop = log.scrollHeight;
  setTimeout(() => {
    typingDiv.remove();
    callback();
  }, 1000);
}

function sendMessage(){
  const input = document.getElementById('user-msg');
  const msg = input.value.trim().toLowerCase();
  if(!msg) return;
  addMessage(msg, 'user');
  input.value = '';

  let answer = "Sorry, I‚Äôm not sure about that ü§î. Try asking about fitness, diet, or motivation!";
  for(const q in faqAnswers){
    if(msg.includes(q)){ answer = faqAnswers[q]; break; }
  }

  const bmiMatch = msg.match(/bmi.*(\d{1,3})\s*cm.*(\d{1,3})\s*kg/);
  if(bmiMatch){
    const h = parseInt(bmiMatch[1])/100;
    const w = parseInt(bmiMatch[2]);
    const bmi = (w/(h*h)).toFixed(2);
    answer = `Your BMI is ${bmi}. ${bmi<18.5?'Underweight':bmi<25?'Healthy weight':bmi<30?'Overweight':'Obese'}.`;
  }

  botTyping(() => addMessage(answer, 'bot'));
}

function clearChat(){
  document.getElementById('chat-log').innerHTML = '';
  localStorage.removeItem('chatHistory');
}

document.getElementById("user-msg").addEventListener("keypress", function(event){
  if(event.key === "Enter"){ event.preventDefault(); sendMessage(); }
});

window.onload = loadChat;
</script>
</body>
</html>
